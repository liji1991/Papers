# 宇树科技春晚人形机器人的仿真体系与Sim2Real Gap解决方案
2025年央视春晚中，宇树科技上百台Unitree H1/G1人形机器人完成了高同步性、高动态的舞蹈表演，其核心技术底座正是**高精度仿真训练体系**与**系统性的Sim2Real（仿真到现实）差距弥合方案**，其中既包含宇树自研的工程化技术，也深度应用了你参考论文中ASAP框架的核心思想，针对春晚场景做了全链路的定制化优化。

## 一、宇树春晚机器人的全流程仿真体系
仿真环节是春晚机器人动作落地的核心前提，目标是在虚拟环境中完成动作编排、策略训练、风险验证，最大程度降低真机调试成本，同时为Sim2Real对齐提供精准的数字基座，整体分为四大核心环节。

### 1. 高精度机器人本体数字孪生建模
这是仿真的基础，也是从根源缩小Sim2Real差距的第一步，宇树针对春晚所用的H1/G1机器人完成了**微米级的刚体动力学全参数建模**：
- 精准标定机器人每个连杆的质量、质心位置、转动惯量，通过激光跟踪仪、六维力传感器完成整机动力学参数的系统辨识，确保仿真中机器人的物理属性与真机1:1匹配；
- 对核心执行器做非线性建模，包括自研关节电机的扭矩输出曲线、减速比、库仑+粘滞摩擦模型、关节齿隙、PD控制环的响应特性，甚至包含电机温升带来的扭矩衰减特性，解决了高动态动作中电机响应与仿真不符的核心问题；
- 足端与环境的接触建模，针对春晚舞台的地板材质，标定了静摩擦/动摩擦系数、碰撞恢复系数，同时对机器人全身的碰撞体做了精准的凸包拟合，避免仿真中碰撞检测与真机出现偏差。

### 2. 高并行、高保真物理仿真平台选型与定制
针对春晚大规模机器人训练、高动态动作仿真的需求，宇树采用了**多引擎协同的仿真方案**，核心以NVIDIA Isaac系列仿真平台为基础：
- 预训练阶段采用**Isaac Gym**：GPU加速的并行物理引擎，可同时实现数千个机器人环境的并行训练，春晚的舞蹈动作策略、多机协同策略均在该平台完成大规模RL训练，相比传统CPU仿真效率提升上千倍；
- 高精度验证阶段采用**Isaac Sim**：具备更逼真的渲染、更精细的碰撞检测和多体动力学求解，用于仿真中验证动作的视觉效果、多机同步性、碰撞风险，确保仿真中的舞蹈动作与春晚舞台的最终呈现效果一致；
- 针对人形机器人的仿真定制：优化了闭环动力学求解频率、接触力计算精度，同时加入了控制延迟、传感器噪声的仿真模拟，让仿真环境尽可能逼近真机的硬件运行特性。

### 3. 动作编排→重定向→仿真训练的标准化闭环
春晚机器人的舞蹈动作并非人工逐关节调试，而是采用了与ASAP论文完全同源的**人体动作到机器人的重定向训练流程**：
1. 动作设计：专业舞蹈演员完成舞蹈动作编排，通过光学动作捕捉系统采集演员的全身三维动作数据，输出SMPL人体格式的动作序列；
2. 动作清洗与重定向：通过仿真驱动的“sim-to-data”清洗，过滤掉物理不可行的动作片段，再通过形状-动作两阶段重定向算法，将人体动作精准映射到H1/G1机器人的关节空间，解决人与机器人的肢体结构、自由度差异问题，生成机器人可执行的参考动作轨迹；
3. 仿真中策略预训练：采用ASAP论文中的**相位条件化运动跟踪框架**，以PPO强化学习算法为核心，训练机器人的动作跟踪策略。通过非对称Actor-Critic框架、参考状态初始化（RSI）、跟踪容差课程学习三大核心设计，让策略在仿真中实现对舞蹈动作的高精度跟踪，同时具备基础的抗干扰能力。

### 4. 多机协同专属仿真环境搭建
春晚表演的核心难点是上百台机器人的同步性，宇树专门搭建了**多机集群仿真环境**：
- 仿真中复刻1:1的春晚舞台场景，模拟上百台机器人的同步运行，加入了通信延迟、时钟同步误差、个体硬件参数差异的随机化，训练多机协同的动作同步策略；
- 在仿真中完成全流程的表演彩排，验证动作衔接、队形变换、碰撞规避的安全性，提前规避真机表演中可能出现的摔倒、碰撞、动作不同步等风险。

## 二、宇树弥合Sim2Real Gap的核心技术方案
仿真与现实的动力学差距（Sim2Real Gap）是人形机器人落地的核心痛点，春晚场景对动作精度、同步性、可靠性的零容错要求，倒逼宇树采用了**“先验标定缩小确定性差距+学习方法补偿非线性差距+分层控制降低对齐难度”的全链路方案**，其中ASAP的Delta动作残差学习是高动态动作对齐的核心。

### 1. 前置极致系统辨识（SysID）：消除确定性偏差
这是所有方案的基础，先通过硬件标定，把仿真与真机之间可建模、可量化的确定性差距降到最低：
- 针对机器人整机的核心物理参数，包括基座质心偏移、连杆质量偏移、关节PD增益比例、摩擦系数等，通过真机数据采集做全局最优参数搜索，让仿真模型的开环动作复现效果与真机高度一致；
- 对关节底层控制环做前馈补偿，在仿真中建模电机的转速-扭矩非线性特性，真机中加入对应的前馈控制，让关节的实际响应与仿真中的指令完全匹配，解决了传统方案中“仿真中动作精准，真机却抖动、跟踪滞后”的问题。

### 2. 进阶域随机化（DR）+课程学习：平衡鲁棒性与动作敏捷性
传统域随机化极易导致策略过于保守，丢失高动态动作的敏捷性，宇树针对春晚场景做了针对性优化，与ASAP论文的训练设计高度契合：
- 精准化参数随机化：仅对影响动作跟踪的核心参数做随机化，包括地面摩擦系数（0.2~1.1）、关节PD增益（±7.5%波动）、控制延迟（20~40ms）、电机扭矩输出（±15%波动），同时加入了周期性的外部扰动模拟，避免无意义的全参数随机化导致策略保守；
- 跟踪容差课程学习：训练初期设置宽松的动作误差终止阈值，让策略先学会基础的动作执行和平衡能力，再逐步收紧阈值，强制策略提升动作跟踪精度，最终在仿真中实现对舞蹈动作的毫米级跟踪，同时保证策略对参数波动的鲁棒性；
- 参考状态随机初始化：不再固定从动作起始点开始训练，而是随机采样舞蹈动作的任意相位初始化机器人状态，让策略并行学习动作的起跳、腾空、落地、旋转等所有阶段，解决了高动态跳跃、转体动作“仿真中能完成，真机却落地失败”的核心问题。

### 3. ASAP Delta动作残差学习：高动态动作的核心对齐方案
这是宇树实现春晚机器人高动态全身动作的核心技术，也是你参考论文的核心创新，完美解决了SysID和DR无法覆盖的非线性、非参数化动力学差距：
1. **真机数据采集**：将仿真中预训练好的舞蹈动作策略部署到真机，通过动捕系统和机器人本体传感器，采集真实运行的轨迹数据，包括机器人基座位姿、速度、关节位置/速度、动作指令序列，构建真实轨迹数据集；
2. **Delta动作模型训练**：将真机采集的动作序列在仿真中重放，以“最小化仿真状态与真机状态的偏差”为目标，用强化学习训练Delta动作残差模型。该模型会学习一个动作修正量，补偿仿真与真机的动力学差距——比如仿真中电机强度被高估，真机无法完成预期跳跃，模型会自动学习调整下肢动作的输出强度，让仿真的状态转移与真机完全一致；
3. **对齐仿真的策略微调**：冻结训练好的Delta模型，将其融入仿真器，构建与真机物理特性1:1对齐的“数字孪生仿真环境”，在该环境中对预训练的动作策略做微调，让策略本身适配真机的动力学特性；
4. **零开销真机部署**：微调完成的策略，直接部署到真机上，无需携带Delta动作模型。策略本身已经包含了对真机动力学偏差的补偿，既保证了动作的敏捷性和跟踪精度，又不会增加真机的计算开销。

通过该方案，宇树解决了春晚中机器人单腿平衡、跳跃、180度转体等高动态动作的Sim2Real对齐，相比传统方案，动作跟踪误差降低超50%，与ASAP论文的实验结果完全一致。

### 4. 分层控制架构：拆解控制链路，压缩偏差影响范围
宇树并未采用端到端的RL控制，而是用**分层控制架构**大幅降低了Sim2Real的对齐难度，这也是春晚机器人实现高同步性的关键：
- **上层策略层**：在仿真中训练完成，输出舞蹈动作的目标关节轨迹、相位信息，仅负责动作的时序和姿态规划，不受底层动力学偏差的影响；
- **中层全身控制（WBC）层**：基于刚体动力学，实时优化全身关节的扭矩、足端接触力，保证机器人的质心平衡和姿态稳定，解决了真机中地面不平、扰动带来的摔倒风险，是仿真策略能在真机稳定运行的核心保障；
- **底层关节控制层**：采用PD控制+前馈补偿，精准跟踪中层输出的关节目标位置，同时通过关节级的标定补偿，消除电机非线性带来的跟踪误差。

分层架构将Sim2Real的差距压缩到底层控制环，上层的动作策略在仿真中训练好后，无需大幅修改即可在真机落地，同时中层的WBC能兜底应对仿真中未覆盖的突发扰动，保证春晚表演的零失误。

### 5. 仿真-真机闭环迭代：小样本微调实现精准复刻
针对春晚的专属舞蹈动作，宇树构建了**“仿真训练→真机部署→数据采集→仿真对齐→策略优化”的闭环迭代流程**：
- 仿真中训练好的策略，先在单台真机上做验证，采集动作跟踪误差、失败案例的数据；
- 用真机数据更新仿真的动力学参数、优化Delta动作模型，让仿真环境进一步逼近真机特性；
- 在更新后的仿真环境中重新微调策略，再回到真机验证，仅需3~5轮迭代，即可实现真机动作与仿真编排的毫米级复刻，大幅降低了真机调试的硬件损耗和时间成本。

### 6. 硬件-算法协同优化：从根源降低动力学偏差
Sim2Real Gap的本质是硬件的物理特性无法被仿真完美建模，宇树从硬件层面就做了针对性优化，从根源缩小差距：
- 春晚所用的H1/G1机器人搭载了宇树自研的M107高性能关节电机，扭矩密度高、响应速度快、控制精度达毫弧度级，同时摩擦、齿隙等非线性特性极小，动力学线性度高，极易被仿真模型拟合；
- 机器人本体搭载了高频率的关节编码器、IMU、足端六维力传感器，数据采样频率达1kHz，为闭环控制和真机数据采集提供了高精度的状态反馈，解决了“仿真中状态可观测，真机却观测不准”的部分可观测问题。

## 三、春晚场景的专项Sim2Real优化
除了通用的人形机器人Sim2Real方案，宇树针对春晚表演的特殊要求，做了三大专项优化：
1. **多机个体差异适配**：每一台机器人的硬件都存在微小的个体差异，宇树在仿真中加入了个体参数差异的随机化，同时为每一台机器人做了专属的参数标定和策略微调，确保上百台机器人的动作执行效果完全一致，实现了春晚中的精准同步；
2. **舞台环境专属适配**：提前采集春晚舞台的地板摩擦系数、平整度数据，在仿真中做1:1复刻，同时针对舞台灯光对视觉传感器的影响、现场音响带来的低频震动，在仿真中加入对应的扰动训练，让策略提前适应春晚的现场环境；
3. **极致的鲁棒性与可靠性强化**：春晚表演要求零失误，宇树在仿真中加入了大量极端场景的故障注入训练，比如单关节扭矩超限、动作跟踪大幅偏差、外部意外碰撞等，让策略具备极强的容错能力和自恢复能力，即使出现微小偏差，也能快速回归正常动作，不会出现摔倒、动作失控等问题。